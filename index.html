<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>D&D 5e quick reference</title>
    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="css/quickref.css">
    <link rel="stylesheet" type="text/css" href="css/icons.css">
    <!-- Fonts -->
    <link href='https://fonts.googleapis.com/css?family=Noto+Sans:400,700,400italic,700italic' rel='stylesheet'
        type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Lora:700' rel='stylesheet' type='text/css'>
    <!-- Javascript -->
    <script>
        // Force a hard refresh if the cached version of the app is outdated.
        // This logic is inlined in the HTML to ensure it runs even if the main JS file is cached.
        (function() {
            // Increment this version number when you deploy breaking changes or significant updates.
            const CURRENT_APP_VERSION = '2.1.5'; // Updated version
            window.dndQuickRefAppVersion = CURRENT_APP_VERSION; // Expose version for other scripts
            const VERSION_KEY = 'appVersion';
            const storedVersion = localStorage.getItem(VERSION_KEY);

            if (storedVersion !== CURRENT_APP_VERSION) {
                localStorage.setItem(VERSION_KEY, CURRENT_APP_VERSION);
                // The 'true' argument forces a hard refresh, clearing the cache for the page.
                location.reload(true);
            }
        })();
    </script>
</head>

<body class="page-background">
    <div class="dark-mode">
        <div class="page fontsize" data-size="fullscreen">

            <!-- Movement section -->
            <div id="section-movement" class="section-container">
                <div class="section-title">
                    <div class="section-title-content">
                        <div class="section-title-text">
                            Il movimento
                            <span class="chevron"></span>
                            <button class="collapse-all-btn">Chiudi gli elementi</button>
                        </div>
                        <span class="float-right">è limitato dalla velocità del personaggio</span>
                    </div>
                </div>
                <div class="section-content">
                    <div class="section-row section-subtitle text fontsize">
                        Puoi muoverti in ogni momento nel tuo turno (prima, dopo o durante le azioni).
                    </div>
                    <div class="section-row" id="basic-movement">
                    </div>
                </div>
            </div>

            <!-- Action section -->
            <div id="section-action" class="section-container">
                <div class="section-title">
                    <div class="section-title-content">
                        <div class="section-title-text">
                            Azione
                            <span class="chevron"></span>
                            <button class="collapse-all-btn">Chiudi gli elementi</button>
                        </div>
                        <span class="float-right">1/turno</span>
                    </div>
                </div>
                <div class="section-content">
                    <div class="section-row section-subtitle text fontsize">
                        Puoi anche interagire, senza spendere alcuna azione, 
                    con un oggetto o una caratteristica dell'ambiente.
                    </div>
                    <div class="section-row" id="basic-actions">
                    </div>
                </div>
            </div>

            <!-- Bonus action section -->
            <div id="section-bonus-action" class="section-container">
                <div class="section-title">
                    <div class="section-title-content">
                        <div class="section-title-text">
                            Azioni Bonus
                            <span class="chevron"></span>
                            <button class="collapse-all-btn">Chiudi gli elementi</button>
                        </div>
                        <span class="float-right">max. 1/turno</span>
                    </div>
                </div>
                <div class="section-content">
                    <div class="section-row section-subtitle text fontsize">
                        Puoi fare un'azione bonus se e solo se un'abilità speciale, un incantesimo o una caratteristica
                    dice esplicitamente che puoi fare qualcosa come azione bonus.
                    </div>
                    <div class="section-row" id="basic-bonus-actions"></div>
                </div>
            </div>

            <!-- Reaction section -->
            <div id="section-reaction" class="section-container">
                <div class="section-title">
                    <div class="section-title-content">
                        <div class="section-title-text">
                            Reazione
                            <span class="chevron"></span>
                            <button class="collapse-all-btn">Chiudi gli elementi</button>
                        </div>
                        <span class="float-right">max. 1/round</span>
                    </div>
                </div>
                <div class="section-content">
                    <div class="section-row section-subtitle text fontsize">
                        Una reazione è una risposta instantanea ad un certo evento, il quale può
                    occorrere durante il tuo turno o quello di qualcun'altro.
                    </div>
                    <div class="section-row" id="basic-reactions"></div>
                </div>
            </div>

            <!-- Condition section -->
            <div id="section-condition" class="section-container">
                <div class="section-title">
                    <div class="section-title-content">
                        <div class="section-title-text">
                            Condizioni
                            <span class="chevron"></span>
                            <button class="collapse-all-btn">Chiudi gli elementi</button>
                        </div>
                    </div>
                </div>
                <div class="section-content">
                    <div class="section-row section-subtitle text fontsize">
                        Le condizioni alterano le tue capacità in vari modi e possono accadere a causa di un incantesimo, una caratteristica 
                    della classe, un attacco di un mostro o altri effetti.
                    </div>
                    <div class="section-row" id="basic-conditions"></div>
                </div>
            </div>

            <!-- Environmental section -->
            <div id="section-environment" class="section-container">
                <div class="section-title">
                    <div class="section-title-content">
                        <div class="section-title-text">
                            Effetti Ambientali
                            <span class="chevron"></span>
                            <button class="collapse-all-btn">Chiudi gli elementi</button>
                        </div>
                    </div>
                </div>
                <div class="section-content">
                    <div class="section-row section-subtitle text fontsize">
                        Gli effetti che oscurano la visibilità possono essere un impedimento alla maggiorparte
                    delle prove che si devono affrontare durante un'avventura.
                    </div>
                    <div class="section-row" id="environment-obscurance"></div>
                    <div class="section-row section-subtitle text fontsize">
                        La presenza o l'assenza di luce in un ambiente crea tre categorie di illuminazione.
                    </div>
                    <div class="section-row" id="environment-light"></div>
                    <div class="section-row section-subtitle text fontsize">
                        Alcune creature hanno sensi straordinari che gli permettono di percepire l'ambiente.
                    </div>
                    <div class="section-row" id="environment-vision"></div>
                    <div class="section-row section-subtitle text fontsize">
                        Gli ostacoli possono dare copertura durante un combattimento, rendendo un bersaglio
                    più difficile da colpire.
                    </div>
                    <div class="section-row" id="environment-cover"></div>
                    <div class="section-row section-subtitle text fontsize">
                        Gli avventurieri potrebbero anche trovarsi ad affrontare una serie di pericoli ambientali e pericoli nascosti.
                    </div>
                    <div class="section-row" id="environment-hazard"></div>
                    </div>
                </div>
            </div>

            <!-- Outdoor section -->
            <div id="section-outdoor" class="section-container">
                <div class="section-title">
                    <div class="section-title-content">
                        <div class="section-title-text">
                            All'avventura!
                            <span class="chevron"></span>
                            <button class="collapse-all-btn">Chiudi gli elementi</button>
                        </div>
                        <span class="float-right">1/turno</span>
                    </div>
                </div>
                <div class="section-content">
                    <div class="section-row section-subtitle text fontsize">
                        Gli avventurieri possono svolgere diverse attività durante il viaggio o a riposo.
                    </div>
                    <div class="section-row" id="basic-outdoor">
                    </div>
                </div>
            </div>
            
            <!-- Settings section -->
            <div id="section-settings" class="section-container">
                <div class="section-title">
                    <div class="section-title-content">
                        <div class="section-title-text">
                            Impostazioni
                            <span class="chevron collapsed"></span>
                            <button class="collapse-all-btn" id="app-version-display" disabled>v0.0.0</button>
                        </div>
                        <span class="float-right" id="active-ruleset-label"></span>
                    </div>
                </div>
                <div class="section-content">
                    <div class="section-row section-subtitle text fontsize">
                        Puoi usare i pulsanti qui sotto per regolare le impostazioni di questa pagina.
                    </div>
                    <div class="section-row" id="settings-items-container">
                        <div class="item itemsize settings-item" title="Includi Regole Opzionali" hidden>
                            <div class="item-text-container text" id="optional-toggle-item">
                                <div class="item-title">Includi Regole Opzionali (*)</div>
                                <div class="item-desc">Mostra/Nascondi le regole opzionali ufficiali.</div>
                            </div>
                            <div class="item-toggle"><label class="switch">
                                    <input type="checkbox" id="optional-switch">
                                    <span class="slider round"></span>
                                </label></div>
                        </div>
                        <div class="item itemsize settings-item" title="Includi Regole Homebrew" hidden>
                            <div class="item-text-container text" id="homebrew-toggle-item">
                                <div class="item-title">Includi Regole Homebrew (**)</div>
                                <div class="item-desc">Mostra/Nascondi le regole homebrew più comuni.</div>
                            </div>
                            <div class="item-toggle"><label class="switch">
                                    <input type="checkbox" id="homebrew-switch">
                                    <span class="slider round"></span>
                                </label></div>
                        </div>
                        <div class="item itemsize settings-item" title="Tema Scuro" hidden>
                            <div class="item-text-container text" id="darkmode-toggle-item">
                                <div class="item-title">Tema Scuro</div>
                                <div class="item-desc">Abilita/Disabilita il Tema Scuro.</div>
                            </div>
                            <div class="item-toggle"><label class="switch">
                                    <input type="checkbox" id="darkmode-switch">
                                    <span class="slider round"></span>
                                </label></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Cookie notice: informs users about cookie usage and provides an accept button -->
    <div id="cookie-notice" class="cookie-notice">
        <p>This website uses cookies to ensure you get the best experience on our website.</p>
        <button id="accept-cookies">Accept</button>
    </div>
    <!-- Main quickref JavaScript logic: handles dynamic content, toggles, and filtering -->
    <script src="js/data_movement.js"></script>
    <script src="js/data_action.js"></script>
    <script src="js/data_bonusaction.js"></script>
    <script src="js/data_reaction.js"></script>
    <script src="js/data_condition.js"></script>
    <script src="js/data_environment.js"></script>
    <script src="js/data_outdoor.js"></script>

    <script type="text/javascript" src="js/quickref.js" charset="utf-8"></script> <script>
        // Cookie notice logic: shows the notice if not accepted, hides it on accept
        document.addEventListener('DOMContentLoaded', function () {
            var cookieNotice = document.getElementById('cookie-notice');
            var acceptButton = document.getElementById('accept-cookies');

            if (!localStorage.getItem('cookiesAccepted')) {
                cookieNotice.style.display = 'block';
            }

            acceptButton.addEventListener('click', function () {
                localStorage.setItem('cookiesAccepted', 'true');
                cookieNotice.style.display = 'none';
            });
        });
    </script>

</body>

</html>
